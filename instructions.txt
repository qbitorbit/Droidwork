Step 1: Create the directory structure in your deepagents project:

cd ~/deepagents
mkdir -p libs/deepagents/deepagents/android_tools

Step 2: Create the base ADB client wrapper.
First file - adb_client.py (Base ADB wrapper):

touch libs/deepagents/deepagents/android_tools/__init__.py
touch libs/deepagents/deepagents/android_tools/adb_client.py

Open libs/deepagents/deepagents/android_tools/adb_client.py in VS Code and paste this:

Step 3: Create a test script to verify it works:

touch test_android_base.py

Paste this in test_android_base.py (in your deepagents root):


Step 4: Run the test:
env -u http_proxy python test_android_base.py

Create a new test file:
touch test_device_manager.py

cd ~/deepagents
touch debug_getprop.py
open debug_getprop.py

cd ~/deepagents/libs/deepagents/deepagents/android_tools

touch app_control.py

touch test_app_control.py

cd ~/deepagents
source venv/bin/activate
env -u http_proxy python -c "from deepagents.android_tools import install_apk; print(install_apk)"

env -u http_proxy python -c "from deepagents.android_tools import install_apk; print('install_apk imported OK')"

env -u http_proxy python -c "from deepagents.android_tools import uninstall_app; print('uninstall_app imported OK')"

env -u http_proxy python -c "from deepagents.android_tools import start_app; print('start_app imported OK')"

env -u http_proxy python -c "from deepagents.android_tools import stop_app; print('stop_app imported OK')"

env -u http_proxy python -c "from deepagents.android_tools import clear_app_data; print('clear_app_data imported OK')"

touch test_app_control_full.py

env -u http_proxy python test_app_control_full.py

env -u http_proxy python -c "from deepagents.android_tools.file_ops import list_files, pull_file, pull_app_database, list_app_databases; print('file_ops imported OK')"

env -u http_proxy python -c "from deepagents.android_tools import list_files, pull_app_database, list_app_databases; print('All file_ops exported OK')"

env -u http_proxy python test_file_ops.py

cd ~/deepagents
source venv/bin/activate
env -u http_proxy python test_android_agent.py

env -u http_proxy python android_agent.py
```

Run these commands:
You: List my connected devices
You: What's the battery level on my first device?
You: Show me third-party apps on RSCR70FW19K
You: List files in /sdcard/Download


touch ~/deepagents/libs/deepagents/deepagents/android_tools/diagnostics.py

# Test 1: take_screenshot
env -u http_proxy python -c "
from deepagents.android_tools.diagnostics import take_screenshot
result = take_screenshot.invoke({})
print(result)
"

# Test 2: get_logcat
env -u http_proxy python -c "
from deepagents.android_tools.diagnostics import get_logcat
result = get_logcat.invoke({'lines': 10})
print(result)
"

# Test 3: capture_bugreport (SLOW - takes 1-3 minutes, skip if needed)
env -u http_proxy python -c "
from deepagents.android_tools.diagnostics import capture_bugreport
result = capture_bugreport.invoke({})
print(result)
"

env -u http_proxy python -c "
from deepagents.android_tools import take_screenshot, get_logcat, capture_bugreport
print('OK - 26 tools total')
"

touch ~/deepagents/libs/deepagents/deepagents/android_tools/ui_automation.py

# Test 1: tap
env -u http_proxy python -c "
from deepagents.android_tools.ui_automation import tap
result = tap.invoke({'x': 500, 'y': 500})
print(result)
"

# Test 2: long_press
env -u http_proxy python -c "
from deepagents.android_tools.ui_automation import long_press
result = long_press.invoke({'x': 500, 'y': 500, 'duration_ms': 500})
print(result)
"

# Test 3: swipe (swipe down)
env -u http_proxy python -c "
from deepagents.android_tools.ui_automation import swipe
result = swipe.invoke({'start_x': 500, 'start_y': 300, 'end_x': 500, 'end_y': 1000})
print(result)
"

# Test 4: input_text (tap a text field first!)
env -u http_proxy python -c "
from deepagents.android_tools.ui_automation import input_text
result = input_text.invoke({'text': 'Hello World'})
print(result)
"

# Test 5: press_key (press Home)
env -u http_proxy python -c "
from deepagents.android_tools.ui_automation import press_key
result = press_key.invoke({'keycode': 'KEYCODE_HOME'})
print(result)
"

# Test 6: get_ui_hierarchy
env -u http_proxy python -c "
from deepagents.android_tools.ui_automation import get_ui_hierarchy
result = get_ui_hierarchy.invoke({})
print(result[:500])
"

# Test 7: drag
env -u http_proxy python -c "
from deepagents.android_tools.ui_automation import drag
result = drag.invoke({'start_x': 500, 'start_y': 500, 'end_x': 500, 'end_y': 800})
print(result)
"
