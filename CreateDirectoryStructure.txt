# Create all directories
mkdir -p ~/.deepagents/agent/skills/confluence/mcp_server
mkdir -p ~/.deepagents/agent/skills/confluence/scripts
mkdir -p ~/.deepagents/agent/skills/confluence/resources/prompts

# Create empty __init__.py files
touch ~/.deepagents/agent/skills/confluence/mcp_server/__init__.py
touch ~/.deepagents/agent/skills/confluence/scripts/__init__.py

# Verify
echo "=== Directory structure created ===" 
find ~/.deepagents/agent/skills/confluence/ -type f -o -type d | sort


cd ~/deepagents
source venv/bin/activate
pip install -r ~/.deepagents/agent/skills/confluence/mcp_server/requirements.txt



cat > ~/.deepagents/agent/skills/confluence/mcp_server/__init__.py << 'EOF'
"""
Confluence MCP Server Package
"""

from .confluence_client import ConfluenceClient, PageContent, SearchResult

__all__ = ["ConfluenceClient", "PageContent", "SearchResult"]
EOF

echo "âœ… __init__.py updated"


cd ~/deepagents
source venv/bin/activate
python ~/.deepagents/agent/skills/confluence/mcp_server/test_import.py


Check deepagents-cli MCP Configuration

echo "=== Looking for deepagents config files ===" && \
find ~/deepagents -name "*.yaml" -o -name "*.yml" -o -name "*.json" -o -name "config*.py" 2>/dev/null | head -20 && \
echo "" && \
echo "=== Checking common config locations ===" && \
ls -la ~/deepagents/libs/deepagents-cli/deepagents_cli/ 2>/dev/null | head -10 && \
echo "" && \
echo "=== Checking .deepagents directory ===" && \
ls -la ~/.deepagents/ 2>/dev/null

curl -s https://raw.githubusercontent.com/langchain-ai/deepagents/master/libs/deepagents-cli/deepagents_cli/skills/__init__.py

curl -s https://raw.githubusercontent.com/langchain-ai/deepagents/master/libs/deepagents-cli/deepagents_cli/skills/middleware.py

cd ~/deepagents && source venv/bin/activate && python -c "from mcp import ClientSession; print('MCP Client available')" 2>/dev/null || echo "Need to check MCP client API"

cd ~/deepagents && source venv/bin/activate && python ~/.deepagents/agent/skills/confluence/mcp_client.py

cd ~/deepagents && source venv/bin/activate && env -u http_proxy python ~/.deepagents/agent/skills/confluence/mcp_client.py
